<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Journal Launcher</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <link rel="apple-touch-icon" href="icon-192.png">
  </head>

  <body>
    <button id="go" style="font-size:18px;padding:14px 18px;">
      Open todayâ€™s journal
    </button>

    <script>
      const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyUvvPGtRLheQW_WMbSiM3_X0P2Y_-H8HekK2CfcaurZ-0L3WIbqCPMA8yf9dkJbGV1/exec";

      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./sw.js");
      }

      document.getElementById("go").addEventListener("click", () => {
        // Use top-level navigation so it works from installed mode too
        window.location.href = SCRIPT_URL;
      });

      // Optional: after you've installed, you can auto-launch with a query flag
      // e.g. start_url in manifest = "./?launch=1"
      const params = new URLSearchParams(location.search);
      if (params.get("launch") === "1") {
        window.location.href = SCRIPT_URL;
      }
    </script>
  </body>
</html>
